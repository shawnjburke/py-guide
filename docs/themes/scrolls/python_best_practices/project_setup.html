
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Use setup.py from the Start &#8212; Python Guide for Practicing Wizards 0.2.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Great Software has Great Logging" href="project_logging.html" />
    <link rel="prev" title="Project Documentation Matters" href="project_documentation_matters.html" /> 
  </head><body>
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="../index.html"
          title="back to the documentation overview"><span>Use setup.py from the Start</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="project_documentation_matters.html">&laquo; Project Documentation Matters</a> |
        <a href="#">Use setup.py from the Start</a>
        | <a href="project_logging.html">Great Software has Great Logging &raquo;</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">Use setup.py from the Start</a><ul>
<li><a class="reference internal" href="#tl-dr-for-page">TL;DR for page</a><ul>
<li><a class="reference internal" href="#setup-py">setup.py</a><ul>
<li><a class="reference internal" href="#setup-py-versus-requirements-txt">setup.py versus requirements.txt</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-build-metadata">Project Build Metadata</a></li>
<li><a class="reference internal" href="#version-numbering">Version Numbering</a></li>
<li><a class="reference internal" href="#python-wheels">Python Wheels</a></li>
<li><a class="reference internal" href="#pypi-package-management">pypi Package Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        
  <div class="section" id="use-setup-py-from-the-start">
<h1>Use setup.py from the Start<a class="headerlink" href="#use-setup-py-from-the-start" title="Permalink to this headline">¶</a></h1>
<p>As I’ve said before scalability of teams is more important to me than, for instance, language perfection, because
there will always be a new language, a new pattern, and another code changing paradigm. Using <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> is along
those lines.  I do it because thinking like your a production application, used by others, is easier to do from the
start, than backport later.  That’s an opinion, I get it, that’s why I wrote my own public guide.</p>
<div class="section" id="tl-dr-for-page">
<h2>TL;DR for page<a class="headerlink" href="#tl-dr-for-page" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>As you create your project, use setup.py.  Structure like a pro from the start.</li>
<li>Test your distributions on the Test Version of PyPI; don’t litter.</li>
<li>Store build meta data in an ini type of file for build pipeline compatibility</li>
</ul>
<div class="section" id="setup-py">
<h3>setup.py<a class="headerlink" href="#setup-py" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">setup</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;Shawn J Burke&#39;</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;pypi.python@teamburke.com&#39;</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="c1"># Trove classifiers</span>
          <span class="c1"># Full list: https://pypi.python.org/pypi?%3Aaction=list_classifiers</span>
          <span class="s1">&#39;Development Status :: 4 - Beta&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Intended Audience :: Developers&#39;</span><span class="p">,</span>
          <span class="s1">&#39;License :: OSI Approved :: MIT License&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Natural Language :: English&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Operating System :: OS Independent&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 2.7&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.3&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.4&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.5&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.6&#39;</span><span class="p">,</span>
          <span class="c1"># https://www.geeksforgeeks.org/difference-various-implementations-python/</span>
          <span class="s1">&#39;Programming Language :: Python :: Implementation :: CPython&#39;</span><span class="p">,</span>
          <span class="c1"># Need to test to see if this will run on PyPy.  That&#39;d be cool.</span>
          <span class="c1"># &#39;Programming Language :: Python :: Implementation :: PyPy&#39;,</span>
          <span class="s1">&#39;Topic :: Software Development :: Quality Assurance&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Topic :: Software Development :: Testing&#39;</span>
        <span class="p">],</span>
      <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Python Project &amp; Coding Standards for Practicing Wizards&#39;</span><span class="p">,</span>
      <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
          <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;py_guide = py_guide.__main__:main&#39;</span><span class="p">]</span>
        <span class="p">},</span>
      <span class="n">keywords</span><span class="o">=</span><span class="s2">&quot;python standards best practice&quot;</span><span class="p">,</span>
      <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
      <span class="c1"># newline separates Description: header in PKG-INFO from readme content. Can&#39;t use extensions like seealso::</span>
      <span class="n">long_description</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.rst&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
      <span class="n">long_description_content_type</span><span class="o">=</span><span class="s1">&#39;text/x-rst&#39;</span><span class="p">,</span>
      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sjb.py_guide&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
      <span class="n">project_urls</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Bug Tracker&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/shawnjburke/py_guide/issues/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Documentation&quot;</span><span class="p">:</span> <span class="s2">&quot;https://shawnjburke.github.io/py_guide/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Source Code&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/shawnjburke/py_guide/&quot;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="c1"># test_suite=&quot;browser_driver.tests.browser_tests&quot;,</span>
      <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/shawnjburke/py_guide&quot;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="s1">&#39;2019.4.28&#39;</span><span class="p">,</span>
      <span class="p">)</span>
</pre></div>
</div>
<div class="section" id="setup-py-versus-requirements-txt">
<h4>setup.py versus requirements.txt<a class="headerlink" href="#setup-py-versus-requirements-txt" title="Permalink to this headline">¶</a></h4>
<p>requirements.txt is used during the development phase.  For instance, I need Sphinx in the development phase
to build the documentation.</p>
<p>setup.py is used to created a distribution (in Windows terms, an installer).  It may not need all the components
needed in the development phase. For instance, my installed application does not build documentaiton, therefore
it does not need Sphinx.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Packages in setup.py are normally in requirements.txt.
Most packages in requirements.txt are needed in setup.py, but not always all.</p>
</div>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text">Examples of requirements.txt but setup.py</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="38%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Package</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Spinx</td>
<td>Used for generating documentation, the installer would not do this,
as it just build the generated documentation done as
part of development</td>
</tr>
<tr class="row-odd"><td>unittest2</td>
<td>Used for testing the code, a development activity, there is no reason
to require this in the setup distribution</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="project-build-metadata">
<h3>Project Build Metadata<a class="headerlink" href="#project-build-metadata" title="Permalink to this headline">¶</a></h3>
<p>Certain information, such as a version number, might be needed in several places in a project.  For instance both
setup.py and the Sphinx conf.py share this information.  While there are a myriad of approaches to how to solve
this problem, our best practice is to store them in a configuration file (.cfg) which is structured like an ini
file with [section] and key = value pairs.   This is done for the maximum portability across a build environment;
all build tools can write to an ini style file, and most languages have some sort of importable code to do it.</p>
</div>
<div class="section" id="version-numbering">
<h3>Version Numbering<a class="headerlink" href="#version-numbering" title="Permalink to this headline">¶</a></h3>
<p>How to give your application a version number can be a topic of some debate.   When creating them I live by</p>
<ul class="simple">
<li>Marketing will always call it something else.  Don’t tie the code version to what people refer to it as.</li>
<li>Do pick something.  Most any scheme is better than nothing.</li>
</ul>
<p>As I put these thoughts together I was remined there are some fundamentals in the debate, and existing standards</p>
<ul class="simple">
<li><a class="reference external" href="https://semver.org/">Semantic Versioning</a> - What most people are use to in a form like Major.Minor.Patch - 1.0.1</li>
<li><a class="reference external" href="https://calver.org/">Calendar Versioning</a> - Some form of using the date, such as my IDE Pycharm, I am writing this with 2018.2.4</li>
<li><a class="reference external" href="https://0ver.org/">Zero Based Versioning</a> - The world’s most important number is zero.  Don’t skip it.</li>
<li><a class="reference external" href="https://github.com/exadra37-versioning/explicit-versioning">Explicit Versioning</a> - Add an additional value is used to indicate if this release breaks backwards compatibility</li>
</ul>
<p>Much of what I say is better summarized by Mahmoud Hashemi who authored the above sites, and a great summary article
with <a class="reference external" href="https://sedimental.org/designing_a_version.html#case-study-chrome-vs-firefox">Chrome vs FireFox Version Numbering</a>.</p>
<p>Ultimately I’ve become a fan of a school of thought that version numbers can be based on a date.  I now understand the
kewl kids would cal this CalVer. There’s something about the date <code class="docutils literal notranslate"><span class="pre">2019.4.10</span></code> <a class="footnote-reference" href="#pad" id="id1">[1]</a> that human beings relate to,
over incremental numbers <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.  I also think it works well for patches <code class="docutils literal notranslate"><span class="pre">2019.4.11.1610</span></code> (adding military time).
I prefer it to avoid the debat of major.minor, or major.minor.revision syntax, <code class="docutils literal notranslate"><span class="pre">1.1</span></code> versus <code class="docutils literal notranslate"><span class="pre">1.0.1</span></code> type of number/
You could even add a tag if necessary, <code class="docutils literal notranslate"><span class="pre">2019.4.10.dev</span></code>. As seen, this works well in a development environments
with lots of builds, you just add the time (even more precision), tags, etc. that are needed <code class="docutils literal notranslate"><span class="pre">2019.4.10.dev</span></code>
or <code class="docutils literal notranslate"><span class="pre">2019.4.10.2306.dev</span></code>.</p>
<p>There are also things with Semantic Versioning that people have gotten used to.  For instance your 1.0 version won’t
be that good.   Reading _Chrome vs FireFox Version Numbering I agreed with the sentiment of not making 2.0 is the death
of your application.  Why?  Developers and Development teams are not all created equal.  While there is good reason
for people to make 1.0 jokes, there are many devs and teams that made a strong 1.0.  I get some sort of my mom telling
me not to judge a book by it’s cover, when I think about these things.</p>
<p>Explicit Versioning was interesting to me for it’s desire to identify a release that breaks backwards compatibility.
I will also give kudos to <a class="reference external" href="https://medium.com/sapioit/why-having-3-numbers-in-the-version-name-is-bad-92fc1f6bc73c">Release.Breaking.Feature.Fix</a> terminology in an article written by <a class="reference external" href="https://medium.com/&#64;sapioit">Sapioit</a>.  This appears
to be the Chrome schema.  The idea of identifying a breaking update is especially important in larger corporate
environments.  In those cases where the amount of software to maintain is vast, knowing a release may break things
for your users (and cost the company $), is a valuable piece of information.</p>
</div>
<div class="section" id="python-wheels">
<h3>Python Wheels<a class="headerlink" href="#python-wheels" title="Permalink to this headline">¶</a></h3>
<p>I found it a bit difficult to navigate the waters of Python installation packages when arrived to the scene.  It appears
to be a side effect of Python having been around for so long, and having various lifetimes as more of a script engine
(as implemented), then to more of a structured language.  Over time, things change (<a class="reference external" href="https://packaging.python.org/discussions/wheel-vs-egg/">wheel vs egg</a>).  There appeared
to be version called the <a class="reference external" href="http://setuptools.readthedocs.io/en/latest/formats.html">egg</a> which is now deprecated in lieu of the <a class="reference external" href="https://pypi.org/project/wheel/">Python Wheel</a> and brought to us via <a class="reference external" href="https://www.python.org/dev/peps/pep-0427/#abstract">PEP 0427</a></p>
<p>There’s even a site tracking the <a class="reference external" href="https://pythonwheels.com/">egg to wheel</a> conversion.</p>
<p>As I worked through it the clear choice is wheel.  It’s newer and includes distribution specific information that makes
it faster than compiling the egg at it’s destination.</p>
</div>
<div class="section" id="pypi-package-management">
<h3>pypi Package Management<a class="headerlink" href="#pypi-package-management" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://packaging.python.org/guides/making-a-pypi-friendly-readme/">https://packaging.python.org/guides/making-a-pypi-friendly-readme/</a>
<a class="reference external" href="https://packaging.python.org/tutorials/packaging-projects/">https://packaging.python.org/tutorials/packaging-projects/</a>
<a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html">https://setuptools.readthedocs.io/en/latest/setuptools.html</a>
<a class="reference external" href="https://packaging.python.org/discussions/install-requires-vs-requirements/">https://packaging.python.org/discussions/install-requires-vs-requirements/</a>
<a class="reference external" href="https://stackoverflow.com/questions/50585246/pip-install-creates-only-the-dist-info-not-the-package">https://stackoverflow.com/questions/50585246/pip-install-creates-only-the-dist-info-not-the-package</a>
<a class="reference external" href="https://pypi.org/classifiers/">https://pypi.org/classifiers/</a></p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="pad" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Python doesn’t like the month zero padded, therefore, I don’t zero pad the version at all</td></tr>
</tbody>
</table>
</div>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Shawn J Burke.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>